"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("feedbackFormScreen");document.getElementById("submitForm");function t(){document.getElementById("lastName").value,document.getElementById("firstName").value,document.getElementById("phoneNumber").value,document.getElementById("email").value}["lastName","firstName","phoneNumber","email"].forEach(function(e){document.getElementById(e).addEventListener("input",t)}),e.addEventListener("submit",function(e){e.preventDefault();e={lastName:document.getElementById("lastName").value,firstName:document.getElementById("firstName").value,middleName:document.getElementById("middleName").value,phoneNumber:document.getElementById("phoneNumber").value,email:document.getElementById("email").value,loanAmount:document.getElementById("loanAmount").value,initialPayment:document.getElementById("initialPayment").value,interestRate:document.getElementById("interestRate").value,loanTerm:document.getElementById("loanTerm").value,monthlyPayment:document.getElementById("monthlyPaymentResult").innerText};fetch("http://localhost/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(e.ok)return e.json();throw new Error("Ошибка сети или сервера")}).then(function(e){e.success?alert("Данные успешно отправлены!"):alert("Произошла ошибка при отправке данных!")}).catch(function(e){console.error("Ошибка:",e),alert("Произошла ошибка при отправке данных!")})}),document.getElementById("toFeedbackFormButton").addEventListener("click",function(){document.getElementById("calculatorScreen").classList.add("hidden"),document.getElementById("feedbackFormScreen").classList.remove("hidden")}),document.getElementById("backToCalculator").addEventListener("click",function(e){e.preventDefault(),document.getElementById("feedbackFormScreen").classList.add("hidden"),document.getElementById("calculatorScreen").classList.remove("hidden")})}),document.addEventListener("DOMContentLoaded",function(){document.getElementById("feedbackFormScreen").classList.add("hidden"),(e=JSON.parse(localStorage.getItem("calculatorData")))&&(document.getElementById("loanAmount").value=e.loanAmount||"",document.getElementById("initialPayment").value=e.initialPayment||"",document.getElementById("interestRate").value=e.interestRate||"",document.getElementById("loanTerm").value=e.loanTerm||"",document.getElementById("monthlyPaymentResult").innerText=e.monthlyPaymentResult||"");var e,m=["loanAmount","initialPayment","interestRate","loanTerm"];m.forEach(function(e){e=document.getElementById(e);e&&e.addEventListener("input",function(){var e,t,n,a;m.every(function(e){e=document.getElementById(e);return e&&""!==e.value.trim()})&&(e=parseFloat(document.getElementById("loanAmount").value)||0,t=parseFloat(document.getElementById("initialPayment").value)||0,a=(parseFloat(document.getElementById("interestRate").value)||0)/100,n=parseInt(document.getElementById("loanTerm").value)||0,t=0===e||0==a||0===n||(a=a/12,n=12*n,(e=(e-t)*Math.pow(1+a,n)*a/(Math.pow(1+a,n)-1))<0)?0:e,document.getElementById("monthlyPaymentResult").innerText="".concat(t.toFixed(2)," ₽"),document.getElementById("toFeedbackFormButton").removeAttribute("disabled")),a={loanAmount:document.getElementById("loanAmount").value,initialPayment:document.getElementById("initialPayment").value,interestRate:document.getElementById("interestRate").value,loanTerm:document.getElementById("loanTerm").value,monthlyPaymentResult:document.getElementById("monthlyPaymentResult").innerText},localStorage.setItem("calculatorData",JSON.stringify(a))})}),document.getElementById("toFeedbackFormButton").addEventListener("click",function(){document.getElementById("calculatorScreen").classList.add("hidden"),document.getElementById("feedbackFormScreen").classList.remove("hidden")}),document.getElementById("backToCalculator").addEventListener("click",function(){document.getElementById("feedbackFormScreen").classList.add("hidden"),document.getElementById("calculatorScreen").classList.remove("hidden")})});